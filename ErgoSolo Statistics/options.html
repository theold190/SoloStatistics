<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="css/options.css">
    <title>ErgoSoloStatistics Extension Options</title>

<script type="text/javascript">
// Set Russian as a default language and a course
var default_language = 1;
var default_course = 1;

function toggleSaveButtonStatus(disable) {
  document.getElementById("IDSaveButton").disabled = disable;
}

function setSelectedItem(id, value) {
  var list = document.getElementById(id);
  for (var i=0; i<list.options.length; i++) {
    if (list.options[i].value == value) {
      list.options[i].selected = true;
      return;
    }
  }
}

// Saves options to localStorage.
function saveOptions() {
  var list = document.getElementById("IDLanguage");
  var index = list.selectedIndex;
  localStorage["language"] = list.options[index].value;

  list = document.getElementById("IDCourse");
  index = list.selectedIndex;
  localStorage["course"] = list.options[index].value;

  var profile = document.getElementById("IDProfile").value;
  localStorage["profile"] = profile;

  toggleSaveButtonStatus(true);
}

// Restores values from localStorage.
function restoreOptions() {
  var language = localStorage["language"];
  if (!language) {
    language = default_language;
  }
  setSelectedItem("IDLanguage", language);

  var course = localStorage["course"];
  if (!course) {
    course = default_course;
  }
  setSelectedItem("IDCourse", course);

  var profile = localStorage["profile"];
  if (!profile) {
    profile = "";
  }
  document.getElementById("IDProfile").value = profile;

  toggleSaveButtonStatus(true);
}

function setFocus()
{
  document.getElementById("IDProfile").focus();
}

function updateLink() {
    var a = document.getElementById("IDCheck");
    var profile = document.getElementById("IDProfile").value;
    var href = "http://nabiraem.ru/user/"+profile;
    a.href = href;
}

</script>
  </head>
  <body>
  <body onload="restoreOptions();setFocus();">
  <div id="content">
  <table class="form">
    <tr><h1>ErgoSolo Statistics Options</h1></tr>

    <tr><td align="right"><h3>Statistics language:</h3></td>
    <td>
    <select onchange="toggleSaveButtonStatus(false)" id="IDLanguage">
      <option value="1">Russian</option>
      <option value="2">English</option>
      <option value="3">German</option>
      <option value="6">Italian</option>
      <option value="7">French</option>
    </select>
    </td></tr>

    <tr><td align="right"><h3>Course:</h3></td>
    <td>
    <select onchange="toggleSaveButtonStatus(false)" id="IDCourse">
      <option value="1">Russian</option>
      <option value="4">English</option>
      <option value="5">German</option>
      <option value="6">Italian</option>
      <option value="7">French</option>
    </select>
    </h3>
    </td></tr>

  <tr><td align="right"><h3>User ID:</h3></td>
  <td>
    <input id="IDProfile" type="text" maxlength=10 size=10 onkeydown="toggleSaveButtonStatus(false)" onchange="updateLink()">
  </td>
  <td><a href="" id="IDCheck">Check</a></td></tr>

  <tr><td/><td align="right">
    <button id="IDSaveButton" onclick="saveOptions()">Save</button>
  </td></tr>
  </table>
  </div>  
  </body>
</html>
